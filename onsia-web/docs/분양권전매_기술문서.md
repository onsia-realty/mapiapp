# 분양권 전매 (마피) 기술 문서

> 온시아 부동산 플랫폼 - 분양권 전매 기능 기술 명세서
> 작성일: 2026-01-10

---

## 목차
1. [기술 스택 개요](#1-기술-스택-개요)
2. [외부 공공데이터 API](#2-외부-공공데이터-api)
3. [내부 API 엔드포인트](#3-내부-api-엔드포인트)
4. [카카오맵 연동](#4-카카오맵-연동)
5. [컴포넌트 구조](#5-컴포넌트-구조)
6. [데이터 타입 정의](#6-데이터-타입-정의)
7. [Mock 데이터 구조](#7-mock-데이터-구조)
8. [환경 변수 설정](#8-환경-변수-설정)
9. [페이지 구조](#9-페이지-구조)
10. [향후 연동 예정 기능](#10-향후-연동-예정-기능)

---

## 1. 기술 스택 개요

| 구분 | 기술 | 버전 |
|------|------|------|
| Framework | Next.js (App Router) | 16.0.5 |
| Language | TypeScript | 5.x |
| Styling | Tailwind CSS | 3.x |
| 지도 | Kakao Maps SDK | - |
| 이미지 최적화 | Next.js Image | 내장 |
| XML 파싱 | xml2js | - |
| HTTP Client | Fetch API | 내장 |
| Package Manager | pnpm | - |

---

## 2. 외부 공공데이터 API

### 2.1 청약홈 분양정보 API

**데이터 출처**: 공공데이터포털 - 한국부동산원_청약홈 분양정보 조회 서비스

| 항목 | 내용 |
|------|------|
| Base URL | `https://api.odcloud.kr/api/ApplyhomeInfoDetailSvc/v1` |
| 인증 방식 | ServiceKey (Query Parameter) |
| 응답 형식 | JSON |
| 캐싱 | 1시간 (revalidate: 3600) |

#### 엔드포인트

**1. 분양정보 목록 조회**
```
GET /getAPTLttotPblancDetail
```

| 파라미터 | 타입 | 필수 | 설명 |
|----------|------|------|------|
| serviceKey | string | O | 공공데이터포털 API 키 |
| page | number | O | 페이지 번호 |
| perPage | number | O | 페이지당 결과 수 |
| cond[HOUSE_SECD::EQ] | string | X | 주택구분 (01:APT, 02:오피스텔) |
| cond[SUBSCRPT_AREA_CODE::EQ] | string | X | 지역코드 |
| cond[RCRIT_PBLANC_DE::LTE] | string | X | 모집공고일 (이하) |
| cond[RCRIT_PBLANC_DE::GTE] | string | X | 모집공고일 (이상) |
| cond[HOUSE_MANAGE_NO::EQ] | string | X | 주택관리번호 (상세조회) |

**2. 평형별 분양가 조회**
```
GET /getAPTLttotPblancMdl
```

| 파라미터 | 타입 | 필수 | 설명 |
|----------|------|------|------|
| serviceKey | string | O | 공공데이터포털 API 키 |
| cond[HOUSE_MANAGE_NO::EQ] | string | O | 주택관리번호 |

#### 응답 데이터 필드

```typescript
interface ApplyHomeItem {
  HOUSE_MANAGE_NO: string;    // 주택관리번호
  PBLANC_NO: string;          // 공고번호
  HOUSE_NM: string;           // 주택명
  HOUSE_SECD_NM: string;      // 주택구분명
  HSSPLY_ADRES: string;       // 공급위치 주소
  TOT_SUPLY_HSHLDCO: string;  // 총 세대수
  RCRIT_PBLANC_DE: string;    // 모집공고일
  SPSPLY_RCEPT_BGNDE: string; // 특별공급 접수일
  GNRL_RNK1_CRSPAREA_RCPTDE: string; // 1순위 접수일
  GNRL_RNK2_CRSPAREA_RCPTDE: string; // 2순위 접수일
  PRZWNER_PRESNATN_DE: string; // 당첨자발표일
  CNTRCT_CNCLS_BGNDE: string; // 계약시작일
  CNTRCT_CNCLS_ENDDE: string; // 계약종료일
  MVN_PREARNGE_YM: string;    // 입주예정년월
  BSNS_MBY_NM: string;        // 사업주체명
  CNSTRCT_ENTRPS_NM: string;  // 시공사명
  MDHS_TELNO: string;         // 문의전화번호
  PBLANC_URL: string;         // 공고문 URL
  HMPG_ADRES: string;         // 분양 홈페이지 URL
}
```

#### 소스 코드 위치
- `src/lib/api/applyhome.ts`

---

### 2.2 국토교통부 실거래가 API

**데이터 출처**: 공공데이터포털 - 국토교통부_아파트매매_실거래가_자료

| 항목 | 내용 |
|------|------|
| Base URL | `https://apis.data.go.kr/1613000/RTMSDataSvcAptTrade` |
| 인증 방식 | ServiceKey (Query Parameter) |
| 응답 형식 | XML |
| 캐싱 | 1시간 (revalidate: 3600) |

#### 엔드포인트

**아파트 매매 실거래가 조회**
```
GET /getRTMSDataSvcAptTrade
```

| 파라미터 | 타입 | 필수 | 설명 |
|----------|------|------|------|
| serviceKey | string | O | 공공데이터포털 API 키 |
| LAWD_CD | string | O | 지역코드 (5자리) |
| DEAL_YMD | string | O | 거래년월 (YYYYMM) |
| numOfRows | number | X | 결과 수 (기본 100) |
| pageNo | number | X | 페이지 번호 |

#### 지역코드 매핑

```typescript
const regionMap: { [key: string]: string } = {
  // 서울
  "강남구": "11680",
  "서초구": "11650",
  "송파구": "11710",
  "강동구": "11740",
  // 경기 - 용인시
  "처인구": "41463",
  "기흥구": "41461",
  "수지구": "41465",
  "용인시": "41460",
};
```

#### 소스 코드 위치
- `src/lib/api/realprice.ts`
- `src/lib/api/real-transaction.ts` (상세 거래 데이터)

---

### 2.3 실거래가 상세 API

**데이터 출처**: 국토교통부 실거래가 상세자료

| API 종류 | 엔드포인트 |
|----------|-----------|
| 매매 상세 | `https://apis.data.go.kr/1613000/RTMSDataSvcAptTradeDev/getRTMSDataSvcAptTradeDev` |
| 전월세 | `https://apis.data.go.kr/1613000/RTMSDataSvcAptRent/getRTMSDataSvcAptRent` |
| 분양권전매 | `https://apis.data.go.kr/1613000/RTMSDataSvcSilvTrade/getRTMSDataSvcSilvTrade` |

#### 소스 코드 위치
- `src/lib/api/real-transaction.ts`

---

### 2.4 버스 정류장 API

**데이터 출처**: 공공데이터포털 - 전국버스정류장위치정보

| 항목 | 내용 |
|------|------|
| Base URL | `https://api.odcloud.kr/api/15067528/v1/uddi:f74b9799-9db1-4754-a5d0-b66e2ae705f3` |
| 인증 방식 | ServiceKey (Query Parameter) |
| 응답 형식 | JSON |

#### 엔드포인트

```
GET /?page={page}&perPage={perPage}&cond[도시명::LIKE]={cityName}&serviceKey={apiKey}
```

#### 응답 데이터

```typescript
interface BusStopData {
  정류장번호: string;
  정류장명: string;
  위도: string;
  경도: string;
  도시명: string;
  도시코드: number;
  관리도시명: string;
  모바일단축번호: number;
  정보수집일: string;
}
```

#### 거리 계산
- Haversine 공식 사용
- 반경 500m 이내 정류장 검색
- 도보 시간 계산 (평균 보행 속도: 4km/h)

#### 소스 코드 위치
- `src/lib/api/bus.ts`

---

### 2.5 지하철역 데이터

**데이터 출처**: 전국도시철도역사정보 표준데이터 (data.go.kr)

| 항목 | 내용 |
|------|------|
| 데이터 형태 | 정적 JSON 파일 |
| 파일 위치 | `src/data/subway-stations.json` |
| 역 정보 수 | 전국 모든 도시철도역 |

#### 데이터 구조

```typescript
interface SubwayStation {
  stationId: string;      // 역번호
  stationName: string;    // 역사명
  lineId: string;         // 노선ID
  lineName: string;       // 노선명
  englishName: string;    // 영문명
  isTransfer: boolean;    // 환승역 여부
  transferLines: string | null; // 환승 노선
  latitude: number;       // 위도
  longitude: number;      // 경도
  operator: string;       // 운영기관
  address: string;        // 주소
  phone: string;          // 전화번호
}
```

#### 노선별 색상 코드

```typescript
const lineColors = {
  "1호선": "#0052A4",
  "2호선": "#00A84D",
  "3호선": "#EF7C1C",
  "4호선": "#00A5DE",
  "5호선": "#996CAC",
  "6호선": "#CD7C2F",
  "7호선": "#747F00",
  "8호선": "#E6186C",
  "9호선": "#BDB092",
  "경의중앙선": "#77C4A3",
  "분당선": "#F5A200",
  "신분당선": "#D4003B",
  // ... 기타 노선
};
```

#### 소스 코드 위치
- `src/lib/api/subway.ts`
- `src/data/subway-stations.json`

---

### 2.6 학교 데이터

**데이터 출처**: 전국초중등학교위치표준데이터 (data.go.kr)

| 항목 | 내용 |
|------|------|
| 데이터 형태 | 정적 JSON 파일 |
| 파일 위치 | `src/data/schools.json` |
| 학교 유형 | 초등학교, 중학교, 고등학교 |

#### 데이터 구조

```typescript
interface SchoolData {
  schoolId: string;       // 학교ID
  schoolName: string;     // 학교명
  schoolType: string;     // 초등학교/중학교/고등학교
  foundationType: string; // 공립/사립
  operationStatus: string; // 운영상태
  roadAddress: string;    // 도로명주소
  jibunAddress: string;   // 지번주소
  latitude: number;       // 위도
  longitude: number;      // 경도
  sidoOffice: string;     // 시도교육청명
  localOffice: string;    // 교육지원청명
}
```

#### 소스 코드 위치
- `src/lib/api/school.ts`
- `src/data/schools.json`

---

## 3. 내부 API 엔드포인트

### 3.1 분양권 상세 조회

```
GET /api/bunyanggwon/{id}
```

| 파라미터 | 타입 | 설명 |
|----------|------|------|
| id | string | 청약홈 주택관리번호 (apiId) |

**응답**: 청약홈 API 데이터 변환 결과

#### 소스 코드 위치
- `src/app/api/bunyanggwon/[id]/route.ts`

---

### 3.2 주변 실거래가 조회

```
GET /api/realprice?address={address}
```

| 파라미터 | 타입 | 설명 |
|----------|------|------|
| address | string | 주소 (예: "경기도 용인시 처인구") |

#### 소스 코드 위치
- `src/app/api/realprice/route.ts`

---

### 3.3 실거래가 상세 조회

```
GET /api/real-transaction?lawdCd={lawdCd}&dealYmd={dealYmd}&type={type}
```

| 파라미터 | 타입 | 설명 |
|----------|------|------|
| lawdCd | string | 지역코드 (5자리) |
| dealYmd | string | 거래년월 (YYYYMM) |
| type | string | trade/rent/presale |

#### 소스 코드 위치
- `src/app/api/real-transaction/route.ts`

---

### 3.4 주변 학교 조회

```
GET /api/schools?lat={latitude}&lng={longitude}&radius={radius}
```

| 파라미터 | 타입 | 설명 |
|----------|------|------|
| lat | number | 위도 |
| lng | number | 경도 |
| radius | number | 반경 (km, 기본 1.5) |

#### 소스 코드 위치
- `src/app/api/schools/route.ts`

---

### 3.5 주변 지하철역 조회

```
GET /api/subway?lat={latitude}&lng={longitude}&radius={radius}
```

| 파라미터 | 타입 | 설명 |
|----------|------|------|
| lat | number | 위도 |
| lng | number | 경도 |
| radius | number | 반경 (km, 기본 2) |

#### 소스 코드 위치
- `src/app/api/subway/route.ts`

---

### 3.6 주변 버스정류장 조회

```
GET /api/bus?lat={latitude}&lng={longitude}&city={cityName}
```

| 파라미터 | 타입 | 설명 |
|----------|------|------|
| lat | number | 위도 |
| lng | number | 경도 |
| city | string | 도시명 (예: "용인") |

#### 소스 코드 위치
- `src/app/api/bus/route.ts`

---

### 3.7 분양 홈페이지 이미지 조회

```
GET /api/property-images/{id}
```

| 파라미터 | 타입 | 설명 |
|----------|------|------|
| id | string | 청약홈 주택관리번호 (apiId) |

**응답**: 분양 홈페이지에서 크롤링한 이미지 URL

```typescript
interface PropertyImages {
  birdEyeView?: string;      // 조감도
  siteLayout?: string;       // 단지배치도
  premium?: string;          // 프리미엄/홍보 이미지
  floorPlans: FloorPlanImage[]; // 평면도 (타입별)
  gallery?: string[];        // 갤러리 이미지
}
```

#### 소스 코드 위치
- `src/app/api/property-images/[id]/route.ts`

---

## 4. 카카오맵 연동

### 4.1 SDK 설정

**Script 로드** (layout.tsx):
```html
<Script
  src="//dapi.kakao.com/v2/maps/sdk.js?appkey={KAKAO_MAP_KEY}&autoload=false"
  strategy="beforeInteractive"
/>
```

### 4.2 KakaoMap 컴포넌트

#### Props

```typescript
interface KakaoMapProps {
  latitude: number;           // 중심 위도
  longitude: number;          // 중심 경도
  markerTitle?: string;       // 메인 마커 제목
  level?: number;             // 줌 레벨 (기본 3)
  className?: string;         // CSS 클래스
  secondaryMarker?: SecondaryMarker | null; // 보조 마커
  onSecondaryMarkerClick?: () => void;
}

interface SecondaryMarker {
  latitude: number;
  longitude: number;
  title: string;
  type?: "bus" | "subway" | "school" | "default";
}
```

#### 기능
- 메인 마커 (단지 위치)
- 보조 마커 (버스정류장, 지하철역, 학교)
- 인포윈도우 (마커 클릭 시 정보 표시)
- 지도 이동 (panTo)

#### 소스 코드 위치
- `src/components/map/KakaoMap.tsx`

### 4.3 환경 변수
```
NEXT_PUBLIC_KAKAO_MAP_KEY=your_kakao_map_javascript_key
```

---

## 5. 컴포넌트 구조

### 5.1 공통 컴포넌트

| 컴포넌트 | 경로 | 설명 |
|----------|------|------|
| MobileLayout | `src/components/layout/MobileLayout.tsx` | 모바일 레이아웃 래퍼 |
| KakaoMap | `src/components/map/KakaoMap.tsx` | 카카오맵 컴포넌트 |
| Button | `src/components/ui/button.tsx` | 버튼 컴포넌트 |
| Input | `src/components/ui/input.tsx` | 입력 컴포넌트 |

### 5.2 기능 컴포넌트

| 컴포넌트 | 경로 | 설명 |
|----------|------|------|
| LoanCalculator | `src/components/calculator/LoanCalculator.tsx` | 대출계산기 |
| ComplexListingPreview | `src/components/listing/ComplexListingPreview.tsx` | 이 단지 매물 미리보기 |

---

## 6. 데이터 타입 정의

### 6.1 분양권 타입

```typescript
// src/types/bunyanggwon.ts

interface Bunyanggwon {
  id: string;
  apiId?: string;           // 청약홈 API ID
  propertyName: string;     // 단지명
  address: string;          // 주소
  type: "APARTMENT" | "OFFICETEL";
  pyeong: string;           // 평형
  supplyArea: number;       // 공급면적
  exclusiveArea: number;    // 전용면적
  price: number;            // 분양가 (만원)
  premium: number;          // 프리미엄 (만원)
  premiumType: "PREMIUM" | "MINUS" | "NONE";
  pricePerPyeong: number;   // 평당가
  salesStatus: "VIP" | "GENERAL";
  moveInDate: string;       // 입주예정일
  region: string;           // 지역
  district: string;         // 구/군
  latitude: number;
  longitude: number;
  thumbnailUrl: string;
  description: string;
  features: string[];
  contactPhone: string;
  agentName: string;
  createdAt: Date;
  updatedAt: Date;
}
```

### 6.2 마피 매물 타입

```typescript
// src/types/bunyanggwon.ts

interface MapiListing {
  id: string;
  registrationNo: string;   // 등록번호
  bunyanggwonId: string;    // 분양권 ID
  apiId?: string;           // 청약홈 API ID

  // 기본 정보
  propertyName: string;
  dong: string;             // 동
  ho: string;               // 호
  type: string;             // 타입 (84A, 84B 등)
  exclusiveArea: number;
  supplyArea: number;
  floor: number;
  totalFloors: number;
  direction: string;        // 향

  // 가격 정보
  salePrice: number;        // 매도가
  originalPrice: number;    // 분양가
  premium: number;          // 프리미엄
  premiumType: "PREMIUM" | "MINUS" | "NONE";

  // 계약 정보
  downPayment: string;      // 계약금
  middlePayment: string;    // 중도금
  balance: string;          // 잔금
  moveInDate: string;

  // 교통
  nearestStation: string;
  stationDistance: string;

  // 통계
  viewCount: number;
  likeCount: number;

  description: string;
  images: string[];

  // 중개사 정보
  broker: BrokerInfo;

  // 단지 정보
  complexInfo: ComplexInfo;

  createdAt: Date;
  updatedAt: Date;
}
```

### 6.3 이 단지 매물 타입 (일반 매물)

```typescript
// src/lib/mock-listings.ts

type ListingType = "SALE" | "JEONSE" | "MONTHLY";
type ListingStatus = "ACTIVE" | "RESERVED" | "COMPLETED";

interface RealEstateListing {
  id: string;
  complexId: string;        // 단지 ID
  complexName: string;      // 단지명

  // 기본 정보
  dong: string;
  ho: string;
  type: string;             // 타입 (59A, 84B 등)
  exclusiveArea: number;
  floor: number;
  totalFloors: number;
  direction: string;

  // 거래 정보
  listingType: ListingType;
  salePrice?: number;       // 매매가 (만원)
  deposit?: number;         // 보증금 (만원)
  monthlyRent?: number;     // 월세 (만원)

  maintenanceFee?: number;  // 관리비

  // 입주 정보
  moveInDate: string;
  moveInType: "IMMEDIATE" | "NEGOTIABLE" | "SCHEDULED";

  // 특징
  features: string[];
  description: string;
  images: string[];

  // 통계
  viewCount: number;
  likeCount: number;
  status: ListingStatus;

  registeredAt: Date;
  updatedAt: Date;
}
```

### 6.4 API 타입

```typescript
// src/types/api.ts

interface BunyanggwonData {
  id: string;
  propertyName: string;
  district: string;
  address: string;
  moveInDate: string;
  status: "모집중" | "청약접수중" | "당첨자발표" | "계약진행중" | "마감";
  thumbnailUrl: string;
  schedule: ScheduleInfo;
  supplyInfo: SupplyInfo;
  priceInfo?: PriceByType[];
  houseType: string;
  region: string;
  announcementUrl?: string;
  homepageUrl?: string;
  images?: PropertyImages;
}

interface PriceByType {
  type: string;
  exclusiveArea: number;
  supplyArea: number;
  pyeong: number;
  price: number;
  totalUnits: number;
  generalUnits: number;
  specialUnits: number;
}
```

---

## 7. Mock 데이터 구조

### 7.1 분양권 목록 Mock

```typescript
// src/lib/mock-bunyanggwon.ts

export const mockBunyanggwon: Bunyanggwon[] = [
  {
    id: "BUN001",
    apiId: "2025000189",  // 청약홈 API와 연결
    propertyName: "클러스터용인 경남아너스빌",
    // ...
  },
  // ...
];
```

### 7.2 마피 매물 Mock

```typescript
// src/lib/mock-mapi.ts

export const mockMapiListings: MapiListing[] = [
  {
    id: "MAPI001",
    bunyanggwonId: "BUN001",  // 분양권과 연결
    apiId: "2025000189",
    // ...
  },
  // ...
];
```

### 7.3 이 단지 매물 Mock

```typescript
// src/lib/mock-listings.ts

export const mockRealEstateListings: RealEstateListing[] = [
  {
    id: "LST001",
    complexId: "BUN001",  // 분양권/아파트 ID와 연결
    listingType: "SALE",
    // ...
  },
  // ...
];
```

---

## 8. 환경 변수 설정

### .env.local

```bash
# 공공데이터포털 API 키
DATA_GO_KR_API_KEY=your_data_go_kr_api_key

# 카카오맵 JavaScript 키
NEXT_PUBLIC_KAKAO_MAP_KEY=your_kakao_map_key
```

### API 키 발급처

| API | 발급처 | URL |
|-----|--------|-----|
| 공공데이터포털 | data.go.kr | https://www.data.go.kr |
| 카카오맵 | Kakao Developers | https://developers.kakao.com |

---

## 9. 페이지 구조

### 9.1 분양권 전매 페이지

| 페이지 | 경로 | 설명 |
|--------|------|------|
| 목록 | `/category/bunyanggwon` | 분양권 전매 목록 |
| 상세 | `/category/bunyanggwon/[id]` | 단지 상세 페이지 |
| 매물 리스트 | `/category/bunyanggwon/[id]/mapi` | 호실별 매물 목록 |
| 매물 상세 | `/category/bunyanggwon/[id]/mapi/[mapiId]` | 개별 매물 상세 |

### 9.2 상세 페이지 섹션 구성

1. **헤더 영역**
   - 이미지 슬라이더 (조감도, 평면도, 갤러리)
   - 단지명, 주소, 입주예정일
   - 공유/관심 버튼

2. **기본 정보 탭**
   - 평형 선택 탭
   - 분양가 정보
   - 청약 일정
   - 공급 정보

3. **주변 시세**
   - 실거래가 API 연동
   - 비교 차트

4. **교통 정보**
   - 지하철역 (정적 JSON 데이터)
   - 버스정류장 (공공데이터 API)
   - 카카오맵 연동

5. **학군 정보**
   - 초/중/고 학교 (정적 JSON 데이터)

6. **이 단지 매물**
   - 매매/전세/월세 일반 매물 (향후 연동 예정)

7. **대출계산기**
   - LTV 슬라이더
   - 은행별 금리 비교
   - 월납입금 계산

8. **문의하기**
   - 전화문의/채팅문의 버튼

---

## 10. 향후 연동 예정 기능

### 10.1 이 단지 매물

현재 Mock 데이터로 구현되어 있으며, 향후 온시아 앱에 등록된 실제 매물 데이터와 연동 예정

**요구제기서 참조**: 15번 - 아파트(임대차)

```typescript
// 현재: Mock 데이터
const listings = getListingsByComplexId(complexId);

// 향후: API 연동
const listings = await fetch(`/api/listings?complexId=${complexId}`);
```

### 10.2 대출계산기 은행 금리

현재 하드코딩된 금리 데이터 사용 (금융감독원 데이터 기준)

```typescript
const BANK_RATES = [
  { name: "카카오뱅크", rate: 3.80, maxLoan: "10억" },
  { name: "수협은행", rate: 4.06, maxLoan: "7억" },
  { name: "케이뱅크", rate: 4.12, maxLoan: "10억" },
  { name: "아이엠뱅크", rate: 4.16, maxLoan: "5억" },
  { name: "우리은행", rate: 4.20, maxLoan: "10억" },
];
```

향후 금융감독원 API 연동 또는 정기 업데이트 필요

### 10.3 분양 홈페이지 이미지 크롤링

현재 특정 단지만 하드코딩되어 있으며, 향후 자동 크롤링 시스템 구축 필요

---

## 11. 거리/시간 계산 공식

### Haversine 공식 (두 좌표 간 거리)

```typescript
function calculateDistance(
  lat1: number, lon1: number,
  lat2: number, lon2: number
): number {
  const R = 6371; // 지구 반경 (km)
  const dLat = toRad(lat2 - lat1);
  const dLon = toRad(lon2 - lon1);

  const a =
    Math.sin(dLat / 2) * Math.sin(dLat / 2) +
    Math.cos(toRad(lat1)) *
    Math.cos(toRad(lat2)) *
    Math.sin(dLon / 2) *
    Math.sin(dLon / 2);

  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
  return R * c; // km
}
```

### 도보 시간 계산

```typescript
function distanceToWalkingTime(distanceKm: number): number {
  // 평균 보행 속도: 4km/h
  return Math.round((distanceKm / 4) * 60); // 분
}
```

---

## 12. Next.js Image 설정

### next.config.ts

```typescript
const nextConfig = {
  images: {
    remotePatterns: [
      { protocol: "https", hostname: "images.unsplash.com" },
      { protocol: "https", hostname: "cluster-honorsville.co.kr" },
      { protocol: "http", hostname: "cluster-honorsville.co.kr" },
      // 분양 홈페이지 도메인 추가 시
    ],
  },
};
```

---

## 부록: API 호출 흐름도

```
┌─────────────────────────────────────────────────────────────┐
│                    분양권 상세 페이지 로드                      │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│  1. Mock 데이터 조회 (mock-bunyanggwon.ts)                   │
│     - apiId 확인                                            │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│  2. 청약홈 API 호출 (/api/bunyanggwon/{apiId})               │
│     - 분양 정보                                              │
│     - 평형별 분양가                                          │
│     - 청약 일정                                              │
└─────────────────────────────────────────────────────────────┘
                              │
          ┌───────────────────┼───────────────────┐
          ▼                   ▼                   ▼
┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐
│ 3-1. 실거래가    │ │ 3-2. 지하철역    │ │ 3-3. 버스정류장  │
│ API 호출        │ │ (정적 JSON)     │ │ API 호출        │
└─────────────────┘ └─────────────────┘ └─────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│  4. 학교 데이터 조회 (정적 JSON)                              │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│  5. 카카오맵 렌더링                                          │
│     - 메인 마커 (단지 위치)                                  │
│     - 보조 마커 (교통, 학교)                                 │
└─────────────────────────────────────────────────────────────┘
```

---

> **문서 버전**: 1.0
> **최종 수정일**: 2026-01-10
> **작성자**: Claude Code
